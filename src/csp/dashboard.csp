<!DOCTYPE html>
<html lang="en">
<script language="Cache" runat="server">
Set ^TEST($I(^TEST)) = $ZDateTime($NOW(),8,1,3)_" : "_$JOB_" : "_"dashboard1.csp"
set URLPreparacao = ""  // csp.dashboard1
Set cServer01 = "cServer01"
Set cIP01 = "vhacrrappxxxhs5<br>vaco.va.gov"
Set dIP01 = "123.XXX.XXX.456"
Set dIP02 = "234.XXX.XXX.567"
</script>

<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport" />

	<!-- Fonts and icons -->
	<script src="resources/plugins/atlantis-lite/assets/js/plugin/webfont/webfont.min.js"></script>
	<script type="text/javascript">
		WebFont.load({
			google: {
				"families": ["Lato:300,400,700,900"]
			},
			custom: {
				"families": ["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular",
					"Font Awesome 5 Brands", "simple-line-icons"
				],
				urls: ['resources/plugins/atlantis-lite/assets/css/fonts.min.css']
			},
			active: function () {
				sessionStorage.fonts = true;
			}
		});
	</script>

	<!-- CSS Files -->
	<link rel="stylesheet" href="resources/plugins/atlantis-lite/assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="resources/plugins/atlantis-lite/assets/css/atlantis.min.css">


<!-- Put your page Title here -->
<title>	Cache Server Page </title>
<style>
body { background-color: white; }
* { text-align: center; color: black; }
h1 { color: darkgray; font-family: verdana; font-size: 12px; text-align: left; }
p { font-size: 12px; }
p.tiny { font-size: 9px; }
.column { float: left; width: 33.33%; }
.columnRight { float: right; }
.row { float: top; }
.row:after { content: ""; display: table; clear: both; }

#dod {
	width: 380px;
	height: 550px;
	border: 10px darkblue;
	padding: 5px;
	margin: 5px;
	background-color: lightcyan;
}
#crrc {
	width: 460px;
	height: 550px;
	border: 10px darkgreen;
	padding: 5px;
	margin: 5px;
	background-color: PaleGreen;
}
#poc {
	width: 320px;
	height: 550px;
	border: 10px darkgreen;
	padding: 5px;
	margin: 5px;
	background-color: lightgrey;
}
.biggerBox {
	width: 380px;
	border: 10px grey;
	padding: 10px;
	margin: 10px;
	background-color: Moccasin;
}

.yellowBox {
	width: 130px;
	border: 10px grey;
	padding: 5px;
	margin: 5px;
	background-color: Moccasin;
}
.mainframe {
	width: 110px;
	border: 10px grey;
	padding: 5px;
	margin: 5px;
	background-color: lightgray;
}
.whiteBox {
	width: 100px;
	height: 110px;
	border: 10px grey;
	padding: 5px;
	margin: 5px;
	background-color: white;
	font-size: 10px;
}
.innerBox {
	width: 85px;
	height: 55px;
	border: 10px grey;
	padding: 5px;
	margin: 5px;
	background-color: white;
}	
.tallerBox {
	width: 100px;
	height: 175px;
	border: 10px grey;
	padding: 5px;
	margin: 10px;
	background-color: white;
}
.pocBar {
	width: 270px;
	border: 10px grey;
	padding: 5px;
	margin: 15px;
	background-color: white;
	text-align: left;
}
.spacer {
	height: 5px;
}
.card {
	width: 100px;
}
</style>

</head>

<body>
<!-- DoD -->
<div id = "dod" class="column">
<h1>DoD</h1>
<div class="row">
<div class="column tallerBox card-body">
	<div id="idIconLockTable01"></div>
	<div id="idLockTable" class="h1 m-0"></div>
	<div class="text-muted mb-3">
		<p class="center large">
		DMLSS<br>
		
		</p>
		<p class="center tiny">
		'#(dIP01)#'
		</p>
	</div>
</div>
<div class="column tallerBox card-body">
	<div id="idIconLockTable02"></div>
	<div id="idLockTable" class="h1 m-0"></div>
	<div class="text-muted mb-3">
		<p class="center tiny">
		DLA<br>
		Defense Logistic Agency
		</p>
		<p class="center tiny">
		DAAS<br>
		Defense Automatic Address System
		</p>
		<p class="center tiny">
		'#(dIP01)#'
		</p>
	</div>
</div>
<div class="column tallerBox card-body">
	<div id="idIconLockTable03"></div>
	<div id="idLockTable" class="h1 m-0"></div>
	<div class="text-muted mb-3">
		<p class="center large">
		DoD<br>
		Firewall
		</p>
		<p class="center tiny">
		'#(dIP02)#'
		</p>
	</div>
</div>
</div>
</div>
<!-- CRRC -->
<div id = "crrc" class="column">
<h1>CRRC DEV</h1>
<div class="row">
<div class="column">
<div class="tallerBox">
<p class="center large">
VA<br>
Firewall
</p>
<p class="center tiny">
'#(cServer01)#'
</p>
<p class="center tiny">
'#(cIP01)#'
</p>
<div id="idIconLockTable04"></div>
</div>
</div>
<div class="column">
<div class="yellowBox">
<div class="whiteBox">
HC-01<br>
Health Connect
10.XXX.XXX.185
'#(cIP01)#'
<div id="idIconLockTable05"></div>
</div>
<p class="center large">
CRRC<br>
Martinsburg, WV
</p>
</div>
</div>
<div class="column">
<div class="yellowBox">
<div class="mainframe">
<div class="innerBox">
VL Trader
<div id="idIconVLTrader"></div>
</div>
<div class="innerBox">
CCS
<div id="idIconLockTable09"></div>
</div>
</div>
<p class="center large">
FSC<br>
Austin, TX
</p>
</div>
</div>
</div>
<div class="row">
<div class="columnRight biggerBox">
<div class="column">
<div class="whiteBox">
<div>
Mailman<br>
(Enterprise MMF)
</div>
<div class="spacer">
</div>
<div>
Manual purge from message queues
</div>
<div class="spacer">
</div>
<div id="idIconLockTable06"></div>
</div>
<div class="whiteBox">
DMI<br>
Data Management Interface
Appends header to incoming message from Mailman
<div id="idIconLockTable07"></div>
</div>
</div>
<div class="column">
<div class="whiteBox">
<p class="center large">
eCMS
</p>
<div id="idIconLockTable10"></div>
</div>
<div>
<div class="spacer">
</div>
<div class="spacer">
</div>
<div class="spacer">
</div>
<div class="spacer">
</div>
<p>
AITC<br>
Austin, TX
</p>
</div>
</div>
<div class="column">
<div class="whiteBox">
<p class="center large">
FMS
</p>
<p class="center tiny">
Development COBOL environment
</p>
<div id="idIconLockTable11"></div>
</div>
<div class="whiteBox">
<p class="center large">
CAPP
</p>
<p class="center large">
IFRR/INRR
</p>
<div id="idIconLockTable08"></div>
</div>
</div>
</div>
</div>
</div>
<div id = "poc" class="column">
<div class="pocBar">
(1) DMLSS to DAAS connection
</div>
<div class="pocBar">
(2) DAAS to DOD Firewall
</div>
<div class="pocBar">
(3) DoD Firewall to VA Firewall
</div>
<div class="pocBar">
(4) VA Firewall to Health Connect
</div>
<div class="pocBar">
(5) Health Connect to Mailman (MMF)
</div>
<div class="pocBar">
(6) Mailman (MMF) to DMI
</div>
<div class="pocBar">
(7) DMI to FMS Queue
</div>
<div class="pocBar">
(8) DMI to CAPP (IFRR/INRR)
</div>
<div class="pocBar">
(9) CCS to Health Connect
</div>
<div class="pocBar">
(10) Health Connect to and from eCMS
</div>
<div class="pocBar">
(11) DCT to Health Connect
</div>
</div>

	<!--   Core JS Files   -->
	<script src="resources/plugins/atlantis-lite/assets/js/core/jquery.3.2.1.min.js"></script>
	<script src="resources/plugins/atlantis-lite/assets/js/core/popper.min.js"></script>
	<script src="resources/plugins/atlantis-lite/assets/js/core/bootstrap.min.js"></script>

	<!-- jQuery UI -->
	<script src="resources/plugins/atlantis-lite/assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
	<script src="resources/plugins/atlantis-lite/assets/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>

	<!-- jQuery Scrollbar -->
	<script src="resources/plugins/atlantis-lite/assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>

	<!-- Chart Circle -->
	<script src="resources/plugins/atlantis-lite/assets/js/plugin/chart-circle/circles.min.js"></script>

	<!-- Atlantis JS -->
	<script src="resources/plugins/atlantis-lite/assets/js/atlantis.min.js"></script>

	<script type="text/javascript">
		var urlPreparacao = '#(URLPreparacao)#'
		var chartAppErrors, chartCacheProcesses, chartCSPSessions, divCacheEfficiency, divSeriourAlerts;

		// ************* Charts ************* // 


		function getSamples() {
			$.getJSON(urlPreparacao, {
				method: "getMetrics"
			}, function (retornoMetricas) {
				var datetimeNow = (new Date()).getTime();


				// System Time 
				// -----------------------------------------------------
				$("#upTime").html(retornoMetricas.SystemUpTime);


				// Single Stats
				// -----------------------------------------------------

				// LockTable
				//$("#idLockTable").html(retornoMetricas.LockTable);
				if (retornoMetricas.LockTable == "Normal") {
					$("#idIconLockTable01").removeClass().addClass("text-right text-success");
					$("#idIconLockTable01").empty().append("<i class='fas fa-check-circle fa-2x'></i>");
				} else {
					$("#idIconLockTable01").removeClass().addClass("text-right text-danger");
					$("#idIconLockTable01").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				}
				if (retornoMetricas.LockTable == "Normal") {
					$("#idIconLockTable02").removeClass().addClass("text-right text-success");
					$("#idIconLockTable02").empty().append("<i class='fas fa-check-circle fa-2x'></i>");
					$("#idIconLockTable02").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				} else {
					$("#idIconLockTable02").removeClass().addClass("text-right text-danger");
					$("#idIconLockTable02").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				}
				if (retornoMetricas.LockTable == "Normal") {
					$("#idIconLockTable03").removeClass().addClass("text-right text-success");
					$("#idIconLockTable03").empty().append("<i class='fas fa-check-circle fa-2x'></i>");
				} else {
					$("#idIconLockTable03").removeClass().addClass("text-right text-danger");
					$("#idIconLockTable03").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				}
				if (retornoMetricas.LockTable == "Normal") {
					$("#idIconLockTable04").removeClass().addClass("text-right text-success");
					$("#idIconLockTable04").empty().append("<i class='fas fa-check-circle fa-2x'></i>");
					$("#idIconLockTable04").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				} else {
					$("#idIconLockTable04").removeClass().addClass("text-right text-danger");
					$("#idIconLockTable04").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				}
				if (retornoMetricas.LockTable == "Normal") {
					$("#idIconLockTable05").removeClass().addClass("text-right text-success");
					$("#idIconLockTable05").empty().append("<i class='fas fa-check-circle fa-2x'></i>");
					$("#idIconLockTable05").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				} else {
					$("#idIconLockTable05").removeClass().addClass("text-right text-danger");
					$("#idIconLockTable05").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				}
				if (retornoMetricas.LockTable == "Normal") {
					$("#idIconLockTable06").removeClass().addClass("text-right text-success");
					$("#idIconLockTable06").empty().append("<i class='fas fa-check-circle fa-2x'></i>");
				} else {
					$("#idIconLockTable06").removeClass().addClass("text-right text-danger");
					$("#idIconLockTable06").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				}
				if (retornoMetricas.LockTable == "Normal") {
					$("#idIconLockTable07").removeClass().addClass("text-right text-success");
					$("#idIconLockTable07").empty().append("<i class='fas fa-check-circle fa-2x'></i>");
					$("#idIconLockTable07").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				} else {
					$("#idIconLockTable07").removeClass().addClass("text-right text-danger");
					$("#idIconLockTable07").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				}
				if (retornoMetricas.LockTable == "Normal") {
					$("#idIconLockTable08").removeClass().addClass("text-right text-success");
					$("#idIconLockTable08").empty().append("<i class='fas fa-check-circle fa-2x'></i>");
				} else {
					$("#idIconLockTable08").removeClass().addClass("text-right text-danger");
					$("#idIconLockTable08").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				}
				if (retornoMetricas.LockTable == "Normal") {
					$("#idIconLockTable09").removeClass().addClass("text-right text-success");
					$("#idIconLockTable09").empty().append("<i class='fas fa-check-circle fa-2x'></i>");
					$("#idIconLockTable09").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				} else {
					$("#idIconLockTable09").removeClass().addClass("text-right text-danger");
					$("#idIconLockTable09").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				}
				if (retornoMetricas.LockTable == "Normal") {
					$("#idIconLockTable10").removeClass().addClass("text-right text-success");
					$("#idIconLockTable10").empty().append("<i class='fas fa-check-circle fa-2x'></i>");
					$("#idIconLockTable10").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				} else {
					$("#idIconLockTable10").removeClass().addClass("text-right text-danger");
					$("#idIconLockTable10").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				}
				if (retornoMetricas.LockTable == "Normal") {
					$("#idIconLockTable11").removeClass().addClass("text-right text-success");
					$("#idIconLockTable11").empty().append("<i class='fas fa-check-circle fa-2x'></i>");
				} else {
					$("#idIconLockTable11").removeClass().addClass("text-right text-danger");
					$("#idIconLockTable11").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				}
				if (retornoMetricas.LockTable == "Normal") {
					$("#idIconVLTrader").removeClass().addClass("text-right text-success");
					$("#idIconVLTrader").empty().append("<i class='fas fa-check-circle fa-2x'></i>");
				} else {
					$("#idIconVLTrader").removeClass().addClass("text-right text-danger");
					$("#idIconVLTrader").empty().append("<i class='fas fa-exclamation-triangle fa-2x'></i>");
				}

			});
		}

		$(document).ready(function () {
			var urlOrigin = window.location.origin;
			var newUrl = urlOrigin + "/csp/sys/UtilHome.csp"
			$("#urlPortal").attr("href", newUrl);

			getSamples();
			setInterval(function () {
				getSamples();
			}, 10000);
		});
	</script>
</body>
</html>
